# packages/shared/Makefile
# gRPC Proto ì»´íŒŒì¼ ìŠ¤í¬ë¦½íŠ¸

.PHONY: generate-grpc clean-grpc help

help:
	@echo "ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì–´:"
	@echo "  make generate-grpc  - Proto íŒŒì¼ì—ì„œ Python ì½”ë“œ ìƒì„±"
	@echo "  make clean-grpc     - ìƒì„±ëœ gRPC íŒŒì¼ ì‚­ì œ"

generate-grpc:
	@echo "ğŸ”¨ gRPC ì½”ë“œ ìƒì„± ì‹œì‘..."
	python -m grpc_tools.protoc \
		-I./shared/grpc/protos \
		--python_out=./shared/grpc/generated \
		--grpc_python_out=./shared/grpc/generated \
		--pyi_out=./shared/grpc/generated \
		./shared/grpc/protos/*.proto

	@echo "ğŸ“ __init__.py ìƒì„±..."
	touch ./shared/grpc/generated/__init__.py

	@echo "âœ… gRPC ì½”ë“œ ìƒì„± ì™„ë£Œ!"
	@echo ""
	@echo "ìƒì„±ëœ íŒŒì¼:"
	@ls -lh ./shared/grpc/generated/

clean-grpc:
	@echo "ğŸ—‘ï¸  ìƒì„±ëœ gRPC íŒŒì¼ ì‚­ì œ..."
	rm -rf ./shared/grpc/generated/*.py
	rm -rf ./shared/grpc/generated/*.pyi
	@echo "âœ… ì‚­ì œ ì™„ë£Œ!"
