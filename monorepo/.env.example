
# .env.development - 개발 환경 설정

# 애플리케이션 설정
PROJECT_NAME="FastAPI Study - Development"
VERSION="0.1.0"
DEBUG=true
API_V1_STR="/api/v1"

# 서버 설정
HOST="0.0.0.0"
PORT=5050

# 데이터베이스 설정 (개발용)
# Transaction 모드 (포트 6543) 사용 - Session 모드(5432)보다 더 많은 연결 허용
# DATABASE_URL="postgresql+asyncpg://postgres.ifhenrlmwkfsxibiwggf:yongbin-dev@aws-1-ap-northeast-2.pooler.supabase.com:6543/postgres"
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:15432/postgres
TEST_DATABASE_URL="postgresql+asyncpg://sa:1@postgres-server:5432/postgres_test"
DB_ECHO=false

# 데이터베이스 연결 풀 설정
# Supabase 세션 모드 제한 고려 (Free: ~15-25개, Pro: ~200개)
# 권장값: API서버(2) + Celery워커(2) + Health(1) = 프로세스당 5개
# 여러 프로세스/컨테이너 실행 시 총 연결 수를 고려하여 조정 필요
DB_POOL_SIZE=2
# 피크 시 추가 연결 허용 (최대 DB_POOL_SIZE + DB_MAX_OVERFLOW)
DB_MAX_OVERFLOW=3
# 5분마다 연결 재활용 (Supabase 권장)
DB_POOL_RECYCLE=300
# 연결 유효성 검사 (반드시 true로 설정)
DB_POOL_PRE_PING=true
# 헬스체크용 별도 풀 크기 (최소화)
DB_HEALTH_CHECK_POOL_SIZE=1

# Redis 설정
REDIS_URL="redis://localhost:6379/0"
REDIS_PASSWORD=""

# Celery 설정
CELERY_BROKER_URL="redis://localhost:6379/1"
CELERY_RESULT_BACKEND="redis://localhost:6379/2"

# Celery Worker 설정 (개발 환경: macOS)
# Pool 옵션:
#   - solo: 디버깅용 (브레이크포인트 사용 가능)
#   - threads: 동시 실행 테스트 (macOS에서 안전)
#   - prefork: macOS에서 비권장 (fork 문제 발생)
CELERY_WORKER_POOL=prefork
CELERY_WORKER_CONCURRENCY=1
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_WORKER_MAX_TASKS_PER_CHILD=100
CELERY_WORKER_LOGLEVEL=INFO

# CORS 설정 (개발 환경에서는 모든 origin 허용)
BACKEND_CORS_ORIGINS='["http://localhost:3000", "http://localhost:8000", "http://localhost:5173"]'

# 로깅 설정
LOG_LEVEL="INFO"
LOG_TO_FILE=true
DEBUG=true
ENABLE_JSON_LOGS=false

# JWT 설정 (개발용 - 보안이 낮은 키)
SECRET_KEY="dev-secret-key-change-in-production"
ALGORITHM="HS256"
# JWT 토큰 만료 시간 (24시간)
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# AI/ML 설정
HUGGINGFACE_CACHE_DIR="./cache/huggingface"
MODEL_CACHE_SIZE=1000

# Ollama 설정
OLLAMA_BASE_URL="http://localhost:11434"

# 개발 도구
ENABLE_RELOAD=true
ENABLE_DOCS=true

ENVIRONMENT="development"
# OCR
OCR_ENGINE=easyocr
OCR_REC=""
OCR_DET=""
# OCR_ENGINE=paddleocr

# GRPC
USE_GRPC="true"
GRPC_PORT=50051

# 모델 서버 설정
MODEL_SERVER_URL="http://localhost:8002"
MODEL_SERVER_TIMEOUT=60

NEXT_PUBLIC_SUPABASE_URL=""
NEXT_PUBLIC_SUPABASE_ANON_KEY=""
SUPABASE_STORAGE_BUCKET="yb_test_storage"
SUPABASE_STORAGE_PATH="uploads"
SUPABASE_SERVICE_ROLE_KEY=""

# 347b3bb13b94f66af8e4ef092daacb6a
# 86ad5e445376cfa8a7aa892a2f1248e1070a03a9eb6cc4dec8e8cd3350899d02