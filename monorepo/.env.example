# .env.development - 개발 환경 설정

# 애플리케이션 설정
PROJECT_NAME="FastAPI Study - Development"
VERSION="0.1.0"
DEBUG=true
API_V1_STR="/api/v1"

# 서버 설정
HOST="0.0.0.0"
PORT=5050

# 데이터베이스 설정 (개발용)
# Transaction 모드 (포트 6543) 사용 - Session 모드(5432)보다 더 많은 연결 허용
DATABASE_URL="postgresql+asyncpg://postgres.ifhenrlmwkfsxibiwggf:[PASSWORD]@aws-1-ap-northeast-2.pooler.supabase.com:6543/postgres"
TEST_DATABASE_URL="postgresql+asyncpg://sa:1@postgres-server:5432/postgres_test"
DB_ECHO=false

# 데이터베이스 연결 풀 설정
# Celery worker 환경에서는 작게 설정
DB_POOL_SIZE=5
# 피크 시 추가 연결 허용
DB_MAX_OVERFLOW=10
# 30분마다 연결 재활용
DB_POOL_RECYCLE=1800
# 연결 유효성 검사
DB_POOL_PRE_PING=true

# Redis 설정
REDIS_URL="redis://redis-server:6379/0"
REDIS_PASSWORD=""

# Celery 설정
CELERY_BROKER_URL="redis://redis-server:6379/1"
CELERY_RESULT_BACKEND="redis://redis-server:6379/2"

# Celery Worker 설정
# Pool 타입:
#   macOS 개발: solo (디버깅), threads (동시 실행)
#   Linux/Docker: prefork (프로덕션, 최고 성능)
# Concurrency: GPU 메모리에 따라 조절 (8GB=1, 16GB=2-4)
CELERY_WORKER_POOL=solo
CELERY_WORKER_CONCURRENCY=1
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_WORKER_MAX_TASKS_PER_CHILD=100
CELERY_WORKER_LOGLEVEL=INFO

# CORS 설정 (개발 환경에서는 모든 origin 허용)
BACKEND_CORS_ORIGINS='["http://localhost:3000", "http://localhost:8000", "http://localhost:5173"]'

# 로깅 설정
LOG_LEVEL="INFO"
LOG_TO_FILE=true
DEBUG=true
ENABLE_JSON_LOGS=false

# JWT 설정 (개발용 - 보안이 낮은 키)
SECRET_KEY="dev-secret-key-change-in-production"
ALGORITHM="HS256"
# JWT 토큰 만료 시간 (24시간)
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# AI/ML 설정
HUGGINGFACE_CACHE_DIR="./cache/huggingface"
MODEL_CACHE_SIZE=1000

# Ollama 설정
OLLAMA_BASE_URL="http://localhost:11434"

# 개발 도구
ENABLE_RELOAD=true
ENABLE_DOCS=true


# OCR
OCR_ENGINE=easyocr
OCR_REC=""
OCR_DET=""
# OCR_ENGINE=paddleocr

# 모델 서버 설정
MODEL_SERVER_URL="http://localhost:8002"
MODEL_SERVER_TIMEOUT=60

SUPABASE_SERVICE_ROLE_KEY=""
NEXT_PUBLIC_SUPABASE_URL="https://ifhenrlmwkfsxibiwggf.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY=""